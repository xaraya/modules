<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>{$lang_insert_lorem_title}</title>
<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
<script language="javascript" type="text/javascript" src="text.js"></script>
<script language="javascript" type="text/javascript">
<!--
var arrSentences=new Array();
         
function init(){
    var formObj = document.forms[0];
    for (var i=0;i<arrText.length;i++){
        arrSentences.push(arrText[i].split('|'));
    }//split text to sentences. Sentences limited by '|'
    
    for (var i=0;i<arrSentences.length;i++){
        var tmp=new Array();
        tmp=(arrSentences[i][0]).split(' ');
        tmp=tmp.slice(0,3);
        var tmpText=tmp.join(' ');
        formObj.lorem_select.options[i]=new Option(tmpText,i);
    }
    //fill listbox with values based on the first 3 words in the sentences, no extra check made for sentences shorter than 3 words, so cross our fingers!
    window.focus();
}
function generate(){
    var insertedText='';
    if (window.opener){
        var formObj = document.forms[0];
        count=formObj.lorem_count.value;
        selectedText=formObj.lorem_select.value;
            switch (formObj.lorem_formatum.value){
                case '0'://unformatted                
                    insertedText=gimmeSentences(count,selectedText);
                break;
                case '1'://para
                    for (var counter=0;counter<count;counter++){
                        countElem=getRandom(3,6);//so many sentences in paragraph
                        insertedText+='<p>'+gimmeSentences(countElem,selectedText)+'</p>';                        
                    }
                break;
                case '2'://ul
                    insertedText+='<ul>';
                    for (var counter=0;counter<count;counter++){
                        countElem=getRandom(1,2);//so many sentences in listelement
                        insertedText+='<li>'+gimmeSentences(countElem,selectedText)+'</li>';                        
                    }
                    insertedText+='</ul>';
                break;
                case '3'://ol
                    insertedText+='<ol>';
                    for (var counter=0;counter<count;counter++){
                        countElem=getRandom(1,2);//so many sentences in listelement
                        insertedText+='<li>'+gimmeSentences(countElem,selectedText)+'</li>';                        
                    }
                    insertedText+='</ol>';
                break;
            }//switch
            tinyMCE.execCommand('mceInsertContent',false,insertedText,'html');
            window.top.close();
    }//if window.opener
}
function getRandom(from,to){
    return Math.round((Math.random()*(to-1))+from);
}
function gimmeSentences(howmany,selText){
    var ret='';
    var arrTmp=new Array();
    for (var i=0;i<howmany;i++){
        arrTmp.push(arrSentences[selText][0]);
        arrSentences[selText].push(arrSentences[selText].shift());
        //make first sentence array element last,
        //in order to avoid paragraphs and list begin always with the same sentence        
    }
    ret=arrTmp.join(' ');
    return ret;
}
//-->
</script>
  </head>
<body onload="init()">
<form name="theForm">
<table cellpadding="2" cellspacing="3">
<tr>
<td align="right" nowrap valign="baseline">{$lang_insert_lorem_text}:</td>
<td align="left" valign="baseline" nowrap>
<select name="lorem_select" id="lorem_select"></select>
</td>
</tr>
<tr>
<td align="right" nowrap valign="baseline">{$lang_insert_lorem_count}:</td>
<td align="left" valign="baseline" nowrap>
<input name="lorem_count" type="text" id="lorem_count" value="2" size="3" maxlength="2">
</td>
</tr>
<tr>
<td align="right" valign="baseline" nowrap>{$lang_insert_lorem_type}: </td>
<td align="left" valign="baseline" nowrap><select name="lorem_formatum" id="lorem_formatum">
<option value="0">{$lang_insert_lorem_unformatted}</option>
<option value="1" selected="selected">{$lang_insert_lorem_para}</option>
<option value="2">{$lang_insert_lorem_ul}</option>
<option value="3">{$lang_insert_lorem_ol}</option>
</select>
</td>
</tr>
<tr>
<td></td>
<td align="left" valign="baseline" nowrap>
<input onclick="generate();" name="lorem_go" type="button" id="lorem_go" value="{$lang_insert_lorem_go}">
</td>
</tr>
</table>
</form>
</body>
</html>